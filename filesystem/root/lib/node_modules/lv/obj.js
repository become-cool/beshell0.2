
beapi.lvgl.Btn.prototype.setText = function setText(text) {
    if(!this._label) {
        this._label = new beapi.lvgl.Label(this)
    }
    this._label.setText(text)
}

class Row extends beapi.lvgl.Obj {
    constructor(parent) {
        super(parent)
        this.removeStyleAll()
        this.setFlexFlow("row")
    }
}
beapi.lvgl.Row = Row
class Column extends beapi.lvgl.Obj {
    constructor(parent) {
        super(parent)
        this.removeStyleAll()
        this.setFlexFlow("column")
    }
}
beapi.lvgl.Column = Column

function size(val) {
    if(typeof val=='string' && val[val.length-1]=='%') {
        let _val = Math.round(val.substr(0,val.length-1))
        if(isNaN(_val)) {
            throw new Error ("invalid percent number: "+val)
        }
        val = beapi.lvgl.pct(_val)
    }
    if(val==-1) {
        val = beapi.lvgl.SizeContent
    }
    return val
}

beapi.lvgl.Obj.prototype.primitiveSetWidth = beapi.lvgl.Obj.prototype.setWidth
beapi.lvgl.Obj.prototype.setWidth = function(val) {
    return this.primitiveSetWidth(size(val))
}

beapi.lvgl.Obj.prototype.primitiveSetHeight = beapi.lvgl.Obj.prototype.setHeight
beapi.lvgl.Obj.prototype.setHeight = function(val) {
    return this.primitiveSetHeight(size(val))
}