class LED {

    constructor(){
        this.option = {}
    }

    /**
     * 
     * @param {number} 正极 pin， undefined 表示使用电源正 
     * @param {number} 负极 pin， undefined 表示使用电源负 
     */
    begin(pp, np) {
        if(pp!=undefined){
            this.option.pp = pp
            pinMode(pp, "output", true)
        }
        if(np!=undefined) {
            this.option.np = np
            pinMode(np, "output", true)
        }
    }

    /**
     * 设置 led 的亮度
     * 
     * @param {float} value 0 - 1
     */
    setValue(value) {
        // pwm -> ground
        if( this.option.np==undefined && this.option.pp!=undefined ) {
            analogWrite(this.option.pp, value)
        }
        // pwm -> pwm
        else if( this.option.np!=undefined && this.option.pp!=undefined ) {
            analogWrite(this.option.pp, value)
            digitalWrite(this.option.np, 0)
        }
        // source -> pwm
        else if( this.option.np!=undefined && this.option.pp==undefined ) {
            digitalWrite(this.option.np, 1-value)
        }
        // source -> ground
        else if( this.option.np==undefined && this.option.pp==undefined ) {
            // nothing todo
        }
    }
}


module.exports = LED