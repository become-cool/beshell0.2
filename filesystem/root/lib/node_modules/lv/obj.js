
beapi.lvgl.Btn.prototype.setText = function setText(text) {
    if(!this.label) {
        this.label = new beapi.lvgl.Label(this)
    }
    this.label.setText(text)
}


beapi.lvgl.Obj.prototype.asRow = function asRow() {
    this.removeStyleAll()
    this.setFlexFlow("row")
}
beapi.lvgl.Obj.prototype.asColumn = function asColumn() {
    this.removeStyleAll()
    this.setFlexFlow("column")
}

class Row extends beapi.lvgl.Obj {
    constructor(parent) {
        super(parent)
        this.asRow()
    }
}
beapi.lvgl.Row = Row
class Column extends beapi.lvgl.Obj {
    constructor(parent) {
        super(parent)
        this.asColumn()
    }
}
beapi.lvgl.Column = Column

function size(val) {
    if(typeof val=='string' && val[val.length-1]=='%') {
        let _val = Math.round(val.substr(0,val.length-1))
        if(isNaN(_val)) {
            throw new Error ("invalid percent number: "+val)
        }
        val = beapi.lvgl.pct(_val)
    }
    if(val==-1) {
        val = beapi.lvgl.SizeContent
    }
    return val
}

beapi.lvgl.Obj.prototype.primitiveSetWidth = beapi.lvgl.Obj.prototype.setWidth
beapi.lvgl.Obj.prototype.setWidth = function(val) {
    return this.primitiveSetWidth(size(val))
}

beapi.lvgl.Obj.prototype.primitiveSetHeight = beapi.lvgl.Obj.prototype.setHeight
beapi.lvgl.Obj.prototype.setHeight = function(val) {
    return this.primitiveSetHeight(size(val))
}